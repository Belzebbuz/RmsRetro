syntax = "proto3";
import "google/protobuf/empty.proto";
option csharp_namespace = "RmsRetro.MessageHub.Protos.HubApi";
service HubApiService {
  rpc SendNotification(Notification) returns (google.protobuf.Empty);
  rpc Subscribe(SubscribeRequest) returns (stream NotificationEvent);
}
message SubscribeRequest {
  string channel_id = 1;
}

message Notification {
  string channel_id = 1;
  NotificationEvent message = 2;
}


message NotificationEvent {
  oneof event {
      StateChangedEvent state_changed = 1;
      TimerTickEvent timer_tick = 2;
      EmptyEvent empty = 3;
  }
}
message EmptyEvent {}
message StateChangedEvent {
  string value = 1;
}

message TimerTickEvent {
  int32 current_value = 1;
  int32 total_value = 2;
}